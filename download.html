<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.min.css" integrity="sha256-BJ/G+e+y7bQdrYkS2RBTyNfBHpA9IuGaPmf9htub5MQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css">
    <link rel="shortcut icon" href="favicon.ico">

    <title>mastercomfig download</title>
    <meta property="og:title" content="mastercomfig download">
    <meta property="og:description" content="The download for mastercomfig: a modern Team Fortress 2 performance and customization config.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mastercomfig.com/download">
  </head>
  <body class="dark-header">
    <header class="jumbotron jumbotron-fluid text-light dark-header">
        <div class="container d-flex align-items-center" style="min-height: 100%">
            <div class="align-middle">
                <h1 class="display-4" id="title">Download mastercomfig</h1>
                <div class="text-light lead">
                  <p><a href="https://docs.mastercomfig.com/en/latest/support_me/"><b>Support me</b></a></p>
                  <p><a href="https://docs.mastercomfig.com/en/latest/setup/clean_up/"><b>Initial Setup Instructions</b></a></p>
                  <p><a href="https://docs.mastercomfig.com/en/latest/next_steps/update/"><b>Update Instructions</b></a></p>
                  <p><a href="https://github.com/mastercoms/mastercomfig/releases/latest"><b>Changelog</b></a></p>
                </div>
                <h2>1. Choose your preset</h2>
                <div class="list-group" id="presets">
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="ultra" href="#">
                    <h5 class="mb-1">Ultra</h5>
                    <p class="mb-1">Absolute maximum quality without caring about performance.</p>
                  </a>
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="high" href="#">
                    <h5 class="mb-1">High</h5>
                    <p class="mb-1">Enables graphical features without making them very high quality.</p>
                  </a>
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="medium-high" href="#">
                    <h5 class="mb-1">Medium High</h5>
                    <p class="mb-1">Disables unoptimized features and optimizes the game without making the game look bad.</p>
                  </a>
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="medium" href="#">
                    <h5 class="mb-1">Medium</h5>
                    <p class="mb-1">The maximum performance you can get while enabling a few effects that may give you a slight edge.</p>
                  </a>
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="medium-low" href="#">
                    <h5 class="mb-1">Medium Low</h5>
                    <p class="mb-1">The maximum performance you can get without making the game too hard to play because of awful visual quality and glitches.</p>
                  </a>
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="low" href="#">
                    <h5 class="mb-1">Low</h5>
                    <p class="mb-1">Maximum performance without caring much about visibility or possible visual glitches.</p>
                  </a>
                  <a class="list-group-item list-group-item-action list-group-item-dark" id="very-low" href="#">
                    <h5 class="mb-1">Very Low</h5>
                      <p class="mb-1">Negatively affects playability by <strong>a lot</strong> and disables very essential features like HUD elements in desperation for performance.
                        <br>Not recommended unless the game has such low performance that it is more of a hinderance than not having HUD elements and good player visibility.
                        <br><strong>BY DOWNLOADING THIS PRESET YOU UNDERSTAND THAT IT <em>REMOVES HUD ELEMENTS AND REDUCES VISIBILITY</em>. IF YOU DON'T WANT THIS <em>USE LOW</em>, THAT'S THE <em>ONLY</em> DIFFERENCE.</strong>
                      </p>
                  </a>
                </div>
                <hr>
                <h2>Select any addons</h2>
                <form>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="no-extra-models">
                    <label class="custom-control-label" for="no-extra-models">
                      <b>No Extra Models</b> &mdash; Removes extra models like rockets in the background, UFOs and UFO posters
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="no-footsteps">
                    <label class="custom-control-label" for="no-footsteps">
                      <b>No Footsteps</b> &mdash; Removes footstep sounds
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="no-pyroland">
                    <label class="custom-control-label" for="no-pyroland">
                      <b>No Pyroland</b> &mdash; Removes Pyroland map textures
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="no-soundscapes">
                    <label class="custom-control-label" for="no-soundscapes">
                      <b>No Soundscapes</b> &mdash; Remove soundscapes (ambient map noise)
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="no-tutorial">
                    <label class="custom-control-label" for="no-tutorial">
                      <b>No Tutorial</b> &mdash; Disables tutorial messages and other popups
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="flat-mouse">
                    <label class="custom-control-label" for="flat-mouse">
                      <b>Flat Mouse</b> &mdash; Makes mouse input "flat" with stable input, no acceleration and 1:1 zoom sensitivity.
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="transparent-viewmodels">
                    <label class="custom-control-label" for="transparent-viewmodels">
                      <b>Transparent Viewmodels</b> &mdash; Enables support for transparent viewmodels. Note that this does not enable transparent viewmodels, your HUD must enable them. This only allows transparent viewmodels to work. Transparent viewmodels also require dxlevel 90 or higher.
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="badgpu">
                    <label class="custom-control-label" for="badgpu">
                      <b>Bad GPU</b> &mdash; Optimizations that generally do not affect quality for weak integrated graphics chips (Intel graphics) or weak/old GPUs (lower end made before 2007). If you have to use this, it's recommended to use Medium Low, Low or Very Low presets. <strong>WARNING: can potentially REDUCE performance on other graphics cards!!!</strong>
                    </label>
                  </div>
                  <br>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="lowmem">
                    <label class="custom-control-label" for="lowmem">
                      <b>Low Memory</b> &mdash; Optimizations that generally do not affect quality for low memory (RAM) systems (4GB and lower). <strong>WARNING: will REDUCE performance on high memory!!!</strong>
                    </label>
                  </div>
                </form>
                <hr>
                <h2>Download your VPKs</h2>
                <p>Just drop them in your <code>tf/custom</code> folder and they'll automatically run.</p>
                <p class="lead"><a href="https://github.com/mastercoms/mastercomfig/releases/latest" class="text-light" id="vpk-dl" style="cursor: pointer"><span class="oi oi-data-transfer-download" title="download" aria-hidden="true"></span> Download Medium High preset and selected addons VPKs</a></p>
                <p class="lead"><a href="https://github.com/mastercoms/mastercomfig/releases/latest/download/autoexec.cfg" class="text-light" id="autoexec-dl"><span class="oi oi-data-transfer-download" title="download" aria-hidden="true"></span> Download user/autoexec.cfg empty file</a></p>
                <p class="lead"><a href="https://github.com/mastercoms/mastercomfig/releases/latest/download/modules.cfg" class="text-light" id="modules-dl"><span class="oi oi-data-transfer-download" title="download" aria-hidden="true"></span> Download user/modules.cfg template</a></p>
                <br><br>
            </div>
        </div>
    </header>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>

    <script>
      "use strict";

      $(() => {
        app();
      });

      function app() {
          // convenience format method for string
          String.prototype.format = function() {
            const args = arguments;
            return this.replace(/{(\d+)}/g, (match, number) => {
              return typeof args[number] !== 'undefined' ? args[number] : match;
            });
          };

        var presets = new Map([
            ["ultra", "Ultra"],
            ["high", "High"],
            ["medium-high", "Medium High"],
            ["medium", "Medium"],
            ["medium-low", "Medium Low"],
            ["low", "Low"],
            ["very-low", "Very Low"]
        ]);

        const recommendableAddons = ["no-extra-models", "no-footsteps", "no-pyroland", "no-soundscapes", "no-tutorial"];

        var recommendedAddons = new Map();

        function setRecommendedAddons(id, values) {
            // don't set non-recommendable addons
            let addons = values.filter(addon => recommendableAddons.indexOf(addon) !== -1);
            if (addons.length != values.length) {
                console.error("Attempted to set non-recommendable addon!");
            }
            recommendedAddons.set(id, addons);
        }

        setRecommendedAddons("ultra", []);
        setRecommendedAddons("high", ["no-extra-models"]);
        setRecommendedAddons("medium-high", ["no-extra-models"]);
        setRecommendedAddons("medium", ["no-extra-models"]);
        setRecommendedAddons("medium-low", ["no-extra-models"]);
        setRecommendedAddons("low", ["no-extra-models", "no-pyroland", "no-soundscapes"]);
        setRecommendedAddons("very-low", ["no-extra-models", "no-footsteps", "no-pyroland", "no-soundscapes", "no-tutorial"]);

        var downloadUrl = "https://github.com/mastercoms/mastercomfig/releases/latest/download/mastercomfig-";
        var addonUrl = downloadUrl + "{0}-addon.vpk";
        var presetUrl = downloadUrl + "{0}-preset.vpk";

        var vpkDownload = document.getElementById('vpk-dl');

        var version = null;

        var addons = ["no-extra-models", "no-footsteps", "no-pyroland", "no-soundscapes", "no-tutorial", "flat-mouse", "transparent-viewmodels", "badgpu", "lowmem"];
        var selectedPreset = "";
        var selections = [];

        var storage = localStorage;

        function getDownloadUrl(id, preset) {
            return (preset ? presetUrl : addonUrl).format(id);
        }

        function getAddonUrl(id) {
            return getDownloadUrl(id, false);
        }

        function getPresetUrl() {
            return getDownloadUrl(selectedPreset, true);
        }

        function downloadUrls(urls) {
            urls[0].then((result) => {
                window.location = result.url;
                if (urls.length > 1) {
                    setTimeout(() => {
                        return downloadUrls(urls.slice(1));
                    }, 2000);
                }
            });
        }

        function download() {
            var downloads = [];
            downloads.push(Promise.resolve({
                url: getPresetUrl()
            }));
            for (const selection of selections) {
                downloads.push(Promise.resolve({
                    url: getAddonUrl(selection)
                }));
            }
            downloadUrls(downloads);
        }

        // update addon state based on checked
        function updateAddon(id) {
          setAddon(id, document.getElementById(id).checked);
        }

        // set addon enabled/disabled
        function setAddon(id, checked) {
          storage.setItem(id, checked);
          checked = storage.getItem(id) === 'true';
          if (checked) {
              if (selections.indexOf(id) === -1) {
                  selections.push(id);
              }
          } else {
              selections = selections.filter(selection => selection !== id);
          }
          document.getElementById(id).checked = checked;
        }

        function setPreset(id, no_set) {
          storage.setItem('preset', id); // save preset selection
          $(document.getElementById(id)).tab('show'); // visually select in tabs menu
          selectedPreset = "medium-high"; // save download ID
          vpkDownload.removeAttribute('href'); // we don't need the static download anymore
          vpkDownload.innerHTML = '<span class="oi oi-data-transfer-download" title="download" aria-hidden="true"></span> Download {0} preset and selected addons VPKs'.format(presets.get(id)); // update preset text
          // if not loading from storage, set recommended addons
          if (!no_set) {
              // reset all recommendable addons
              recommendableAddons.forEach((addon) => {
                  setAddon(addon, false);
              });
              // set recommended addons
              recommendedAddons.get(id).forEach((addon) => {
                  setAddon(addon, true);
              });
          }
        }

        // get latest release, and update page
        $.get("https://api.github.com/repositories/69422496/releases/latest", (data) => {
          version = data.tag_name;
          let versionName = version.indexOf('v') === 0 ? version.substr(1) : version; // some releases use the v prefix, ignore it
          // update title with version
          document.getElementById('title').innerText = "Download mastercomfig " + versionName;
          // if we have a stored preset, load it
          if (storage.getItem('preset')) {
            setPreset(storage.getItem('preset'), true);
          } else {
            setPreset('medium-high');
          }
          for (const id of addons) {
            if (storage.getItem(id)) {
              setAddon(id, storage.getItem(id))
            } else {
              setAddon(id, false);
            }
          }
        }, "json");

        $('#presets a').on('click', function(e) {
          e.preventDefault();
          setPreset(this.id);
        });

        $('#vpk-dl').on('click', function() {
            download();
        });

        $("input[type='checkbox']").change(function() {
          updateAddon(this.id);
        });
      }
    </script>
  </body>
</html>
